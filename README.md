# 🧬 PyRetina: 神经形态视觉仿真与时空数据分析系统

### Neuromorphic Vision Simulation & Spatiotemporal Analysis Platform

> **"打通生物视觉机制 (Biological Vision) 与计算机视觉 (Computer Vision) 的桥梁"**

---

## 📖 项目介绍 (Introduction)

**PyRetina** 是一个基于 Python 的神经形态视觉仿真平台。它旨在模拟生物视网膜中**神经节细胞 (Retinal Ganglion Cells, RGCs)** 的信息处理机制，将传统的 RGB 帧数据实时转换为**类事件 (Event-like)** 的稀疏时空信号。

本项目不仅仅是一个图像滤镜，它是一个**时空域联合滤波器 (Spatiotemporal Filter)**。通过复现视网膜的**“中心-周边拮抗” (Center-Surround Antagonism)** 机制，系统能够有效去除视觉冗余（如静态背景），仅提取高价值的时空变化特征（如运动边缘），为神经形态工程、边缘计算及仿生视觉研究提供直观的验证平台。

---

## ✨ 主要功能 (Key Features)

* **👁️ 仿生视觉模拟**：基于 **高斯差分 (DoG)** 算子，精准模拟视网膜神经节细胞的 ON/OFF 通路响应。
* **⚡ 实时时空数据转换**：将普通摄像头的连续视频流 () 实时转化为稀疏的神经脉冲信号模拟。
* **🖥️ 双屏对比交互**：
* **左屏**：展示“生物输入” (原始 RGB 视觉)。
* **右屏**：展示“神经节响应” (模拟大脑接收到的信号)。


* **🎛️ 动态神经调控**：通过滑块实时调节感受野的**兴奋中心 ()** 与 **抑制周边 ()** 参数，观察侧向抑制对特征提取的影响。
* **📊 信号稀疏性分析**：内置实时直方图，可视化展示神经信号的稀疏编码特性（绝大部分区域静默，仅边缘激活）。
* **🚀 沉浸式引导体验**：包含全中文的科研引导界面，阐述项目理论背景与核心价值。

---

## 🛠️ 技术架构 (Technology Stack)

* **核心算法层**: `OpenCV (cv2)`, `NumPy`
* 使用 `Float32` 精度进行科学计算，结合 `UMat` 加速（或内存重构技术）解决平台兼容性问题。


* **交互界面层**: `PyQt6`
* 采用现代深色主题 (Dark Mode)，实现响应式布局与高分屏适配。


* **开发环境**: Python 3.9+ (兼容 macOS M1/M2/M3 芯片)

---

## 📂 项目结构 (Project Structure)

```text
PyRetina/
│
├── main.py                # 🚀 程序启动入口
├── requirements.txt       # 📦 依赖库列表
├── README.md              # 📄 项目说明文档
│
├── core/                  # 🧠 核心算法模块
│   ├── __init__.py
│   └── retina.py          # 包含 DoG 算子与数据清洗逻辑 (RetinaProcessor)
│
├── gui/                   # 🎨 用户界面模块
│   ├── __init__.py
│   ├── intro.py           # 科研风格引导页 (原理介绍)
│   └── window.py          # 主仿真控制台 (双屏显示与参数调节)
│
└── assets/                # 🖼️ 资源文件 (建议存放)
    ├── slide1.jpg         # 引导页：RGB相机缺陷示意图
    └── slide2.jpg         # 引导页：DVS/视网膜原理示意图

```

---

## ⚡ 安装与运行 (Installation & Usage)

### 1. 环境准备

建议使用 `conda` 创建独立的虚拟环境，以避免 Numpy 版本冲突（特别是在 Mac M芯片上）。

```bash
conda create -n PyRetina python=3.11
conda activate PyRetina

```

### 2. 安装依赖 (关键步骤)

由于 OpenCV 与 Numpy 2.0+ 存在兼容性问题，**请务必使用以下命令安装指定版本**，以确保系统稳定运行：

```bash
pip install "numpy==1.26.4" "opencv-python==4.9.0.80" PyQt6

```

### 3. 运行系统

在项目根目录下执行：

```bash
python main.py

```

---

## 🎮 使用指南 (User Guide)

### 1. 引导阶段

启动后，系统将展示**理论导览页**。

* 浏览背景介绍、仿生原理及核心概念定义。
* 点击 **"启动仿真系统 (Launch) 🚀"** 进入核心界面。

### 2. 核心仿真操作

* **观察视图**：
* **左侧**是普通相机看到的画面（充满冗余细节）。
* **右侧**是模拟视网膜输出的**热力图**：
* 🟩 **绿色** = 0 (静默/背景被抑制)
* 🟨 **红黄** = 正信号 (兴奋/亮边缘)
* 🟦 **深蓝** = 负信号 (抑制/暗边缘)




* **调节参数 (Neural Tuning)**：
* 拖动 **"抑制周边 "** 滑块：数值越大，侧向抑制越强，轮廓提取越明显。


* **分析数据**：
* 观察右下角的 **"信号强度直方图"**。你会看到波峰集中在中央（绿色），证明数据被极度压缩（稀疏化）。



---

## 💡 常见问题与理论解析 (FAQ & Theory)

以下是对本项目核心科学问题的深度解答。

### Q1: 为什么说相机采集的是“时空数据”？

**A:** 本项目不仅仅处理静态图片，而是处理连续的视频流 。

* **空间域 (Spatial)**：通过 DoG 算子，我们在  平面上提取纹理和边缘结构。
* **时间域 (Temporal)**：系统实时运行，当物体运动时，信号随时间  变化。静止的背景被算法滤除（空间抑制），只有发生**时空变化**的区域才会被激活。
* **结论**：这是一个**时空滤波器**，它捕捉的是随时间流动的空间特征。

### Q2: 什么是“侧向抑制” (Lateral Inhibition)，如何在软件中体现？

**A:** 侧向抑制是指神经元兴奋时会抑制周围神经元的活动，目的是增强边缘对比度。

* **数学实现**：。那个 **减号 (-)** 就是抑制。
* **视觉证据**：请看右屏热力图。在亮边缘（黄色）的紧邻处，通常伴随一道深色阴影（蓝色）。这道“阴影”就是侧向抑制产生的负信号，它让边缘看起来更加锐利。

### Q3: 什么是“稀疏编码” (Sparse Coding)？

**A:** 稀疏编码指大脑使用极少量的激活神经元来编码复杂信息。

* **视觉证据**：
1. **大面积绿色**：右屏中 90% 的区域（墙壁、纯色衣服）都是绿色的（值为0），说明这些冗余信息未被传输。
2. **尖锐直方图**：右下角的波形图呈现“尖峰状”，数据高度集中在 0 附近。


* **意义**：这证明了仿生机制能极大地降低数据带宽，实现高效计算。

### Q4: 这就是真实的事件相机 (DVS) 数据吗？

**A:** 这是一个**基于标准相机的 DVS 机制仿真**。
真实的 DVS 硬件直接输出脉冲。本项目利用数学模型，在软件层面重现了 DVS 的核心逻辑（去冗余、高动态范围响应）。右侧的热力图是对**“模拟神经电位”**的可视化翻译。

---

## 📝 版权信息 (License)

本项目遵循 MIT 开源协议。
Developed for Neuromorphic Engineering Research & Education.